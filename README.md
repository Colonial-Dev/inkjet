<h1 align="center">Inkjet</h1>
<h3 align="center">A batteries-included syntax highlighting library for Rust, based on <code>tree-sitter</code>.</h3>
<p align="center">
<img src=".github/logo.png" width="256">
</p>

<p align="center">
<img src="https://img.shields.io/crates/v/inkjet">
<img src="https://img.shields.io/github/actions/workflow/status/SomewhereOutInSpace/inkjet/rust.yml">
<img src="https://img.shields.io/crates/l/inkjet">
</p>

## Features

- Language grammars are linked into the executable as C functions - no need to load anything at runtime!
- Pluggable formatters. Inkjet includes formatters for HTML (either with class names or inline styles), and you can write your own if needed.
- Highlight into a new `String` or a `std::io::Writer`, depending on your use case.
- Specify languages explicitly (from an `enum`) or look them up using a token like `"rs"` or `"rust"`.
- ~~Extremely cursed `build.rs`~~

## Included Languages

Inkjet comes bundled with support for over sixty languages, and it's easy to add more - see the FAQ section.

- Ada
- Assembly (generic)
- Bash
- BibTeX
- Blueprint
- C
- Cap'n Proto
- Clojure
- CMake
- C#
- Common Lisp
- C++
- CSS
- Cue
- Dart
- `diff` output
- Dockerfule
- Emacs Lisp
- Elixir
- Elm
- Erlang
- Fortran
- Go
- GDScript
- GLSL
- Haskell
- HCL/Terraform
- HTML
- Java
- JavaScript
- JSON
- Julia
- Kotlin
- LaTeX
- Lua
- GNU Make
- MatLab
- Meson
- Nim
- Nix
- Objective-C
- OCaml
- OpenSCAD
- Pascal
- Perl
- PHP
- Python
- R
- Regex
- Ruby
- Rust
- Scala
- Scheme
- SCSS
- SQL (generic)
- TOML
- TypeScript
- x86 Assembly
- YAML
- WGSL
- Zig

## FAQ

### *"Why is Inkjet so large?"*

Parser sources generated by `tree-sitter` can grow quite big, with some being dozens of megabytes in size. Inkjet has to bundle these sources for all the languages it supports, so it adds up. (According to `loc`, there are over 16 *million* lines of C code!)

### *"Why is Inkjet taking so long to build?"*

Because it has to compile and link in dozens of C/C++ programs (the parsers and scanners for every language Inkjet bundles.)

However, after the first build, these artifacts will be cached and subsequent builds should be much faster.

### *"Why does highlighting require a mutable reference to the highlighter?*

Under the hood, Inkjet creates a `tree-sitter` highlighter/parser object, which in turn dynamically allocates a chunk of working memory. Using the same highlighter for multiple simultaneous jobs would therefore cause all sorts of nasty UB.

If you want to highlight in parallel, you'll have to create a clone of the highlighter for each thread.

### *"A language I want to highlight isn't bundled with Inkjet!"*

Assuming that you or someone else has implemented a highlighting-ready `tree-sitter` grammar for the language you want, adding it to Inkjet is easy! Just open an issue asking for it to be added, linking to the grammar repository for the language.

However, please note that Inkjet currently only supports grammar repositories that check in the parser generated by `tree-sitter` (in order to avoid a build-time dependency on `node`/`npm`.)

## Acknowledgements
- Inkjet would not be possible without `tree-sitter` and the ecosystem of grammars surrounding it.
- Enhanced highlighting queries for many languages (as well as queries for languages that would otherwise not be supported!) are sourced from the [`nvim-treesitter`](https://github.com/nvim-treesitter/nvim-treesitter) project.